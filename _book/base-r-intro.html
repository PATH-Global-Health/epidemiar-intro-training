<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>EpidemiaR Introductiory Materials - 1&nbsp; Introduction to R and Rstudio and basic functions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./if-statements.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./base-r-intro.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to R and Rstudio and basic functions</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">EpidemiaR Introductiory Materials</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Background</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./base-r-intro.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to R and Rstudio and basic functions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./if-statements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Using <code>if</code> statements</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./more-base.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">More base R functions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pipes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Chaining multiple steps using pipes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dpylr-tidyr-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data manipulation with <code>*dplyr*</code> and <code>*tidyr*</code></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./joins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Joining data in tidyverse</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#working-with-rstudio" id="toc-working-with-rstudio" class="nav-link active" data-scroll-target="#working-with-rstudio"><span class="header-section-number">2</span> <strong>Working with RStudio</strong></a>
  <ul class="collapse">
  <li><a href="#introduction-to-rstudio" id="toc-introduction-to-rstudio" class="nav-link" data-scroll-target="#introduction-to-rstudio"><span class="header-section-number">2.1</span> <strong>Introduction to RStudio</strong></a></li>
  <li><a href="#setting-up-a-project-in-rstudio" id="toc-setting-up-a-project-in-rstudio" class="nav-link" data-scroll-target="#setting-up-a-project-in-rstudio"><span class="header-section-number">2.2</span> <strong>Setting up a project in RStudio</strong></a></li>
  <li><a href="#exploring-r-finding-help-debugging-and-writing-comments" id="toc-exploring-r-finding-help-debugging-and-writing-comments" class="nav-link" data-scroll-target="#exploring-r-finding-help-debugging-and-writing-comments"><span class="header-section-number">2.3</span> <strong>Exploring R, finding help, debugging and writing comments</strong></a></li>
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types"><span class="header-section-number">2.4</span> <strong>Data types</strong></a>
  <ul class="collapse">
  <li><a href="#numbers" id="toc-numbers" class="nav-link" data-scroll-target="#numbers"><span class="header-section-number">2.4.1</span> <strong>Numbers</strong></a></li>
  <li><a href="#strings" id="toc-strings" class="nav-link" data-scroll-target="#strings"><span class="header-section-number">2.4.2</span> <strong>Strings</strong></a></li>
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors"><span class="header-section-number">2.4.3</span> <strong>Vectors</strong></a></li>
  </ul></li>
  <li><a href="#data-frames" id="toc-data-frames" class="nav-link" data-scroll-target="#data-frames"><span class="header-section-number">2.5</span> <strong>Data frames</strong></a></li>
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages"><span class="header-section-number">2.6</span> <strong>Packages</strong></a>
  <ul class="collapse">
  <li><a href="#installing-and-using-a-package" id="toc-installing-and-using-a-package" class="nav-link" data-scroll-target="#installing-and-using-a-package"><span class="header-section-number">2.6.1</span> <strong>Installing and using a package</strong></a></li>
  </ul></li>
  <li><a href="#reading-in-data" id="toc-reading-in-data" class="nav-link" data-scroll-target="#reading-in-data"><span class="header-section-number">2.7</span> <strong>Reading in data</strong></a>
  <ul class="collapse">
  <li><a href="#example-1-how-many-confirmed-malaria-cases-hf-there-were-in-katete-district-in-2020" id="toc-example-1-how-many-confirmed-malaria-cases-hf-there-were-in-katete-district-in-2020" class="nav-link" data-scroll-target="#example-1-how-many-confirmed-malaria-cases-hf-there-were-in-katete-district-in-2020"><span class="header-section-number">2.7.1</span> Example 1: How many <strong>confirmed malaria cases (HF)</strong> there were in <strong>Katete district</strong> in <strong>2020</strong>?</a></li>
  <li><a href="#example-2-what-was-total-number-of-rdts-conducted-by-hfs-and-chws-in-sinazongwe-district-in-2019" id="toc-example-2-what-was-total-number-of-rdts-conducted-by-hfs-and-chws-in-sinazongwe-district-in-2019" class="nav-link" data-scroll-target="#example-2-what-was-total-number-of-rdts-conducted-by-hfs-and-chws-in-sinazongwe-district-in-2019"><span class="header-section-number">2.7.2</span> Example 2: What was <strong>total number of RDTs conducted by HFs and CHWs</strong> in <strong>Sinazongwe</strong> district in <strong>2019</strong>?</a></li>
  </ul></li>
  <li><a href="#cheat-sheet-of-functions-from-this-unit" id="toc-cheat-sheet-of-functions-from-this-unit" class="nav-link" data-scroll-target="#cheat-sheet-of-functions-from-this-unit"><span class="header-section-number">2.8</span> <strong>Cheat sheet of functions from this unit</strong></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to R and Rstudio and basic functions</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="working-with-rstudio" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> <strong>Working with RStudio</strong></h1>
<section id="introduction-to-rstudio" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="introduction-to-rstudio"><span class="header-section-number">2.1</span> <strong>Introduction to RStudio</strong></h2>
<p>R is a statistical and graphical software package, and is the very commonly used in many disciplines, including data science, statistics and the environmental and biological sciences The great strengths of R for the research community are:</p>
<ul>
<li>It is free, which means anyone can use it.</li>
<li>It is open source, which means you can inspect and modify the code within in.</li>
<li>It is a community, so researchers around the world have developed code for particular applications that they have made freely available. These are published as ‘packages’ which can be downloaded with just a couple of lines of code.</li>
<li>Because of all the community-developed code, there are functions available in R for pretty much every data analysis, statistical method or model, graphic or chart you could ever need. Once you understand how to use R, you will be able to access these.</li>
<li>There is an incredible amount of help to be found online for most problems (often on stackoverflow and twitter #rstats)</li>
</ul>
<p>By the end of this unit we will have covered</p>
<ol type="1">
<li>Opening up Rstudio</li>
<li>Setting up a project in Rstudio</li>
<li>Exploring R, finding help, debugging and writing comments</li>
<li>Different data types</li>
<li>How to calculate basic operations on vectors</li>
<li>How to use dataframes</li>
<li>What packages are and how to install and use them</li>
<li>How to read in external data sources</li>
</ol>
<p>Hopefully you have followed the tutorial we shared and have RStudio downloaded and installed on your computer If you open up Rstudio, you will have 3 panels that look like this</p>
<p><img src="hs_images/fig_1_Rstudio_basic.PNG" class="img-fluid" style="width:90.0%"></p>
<p>The first thing you want to do is open up a new <strong>R script</strong></p>
<p><img src="hs_images/fig_2_new_script.PNG" class="img-fluid" style="width:70.0%"></p>
<p>Your Rstudio will now have 4 panels</p>
<p><img src="hs_images/fig_3_windows.PNG" class="img-fluid" style="width:70.0%"></p>
<p>These screens are:</p>
<p><strong>Top left:</strong> An “R Script” window – this is essentially a text editor where you can write code and commands to be run in the console window. You can edit and correct your work here, and save it so you can use it again. I suggest saving regularly, and keep all your successful code here so you can keep working. Try to use informative script names to help your future self, for example you could save this unit’s script as “R_training_part1”.</p>
<p><strong>Bottom left:</strong> This is the “R Console” – this is where the processing is done. You should typically write script code in the “RScript” window and press Ctrl+Enter (or click “Run”) to run them in the console. You may sometimes want to type directly in the console to quickly check that new object looks how you expect them to look or run simple checks that you don’t want to revisit later.</p>
<p><strong>Top right:</strong> The “Environment” tab here shows all the data you’ve loaded and variables/objects you’ve created.</p>
<p><strong>Bottom right:</strong> Plots you create will show here. You can also use R Help here: type a function you’re using into the search box and you will get information on its inputs (“Arguments”) and outputs (“Value”), or in the console write a ‘?’ then the function name, i.e.&nbsp;‘?mean’ to understand how to use the ‘mean’ function.</p>
</section>
<section id="setting-up-a-project-in-rstudio" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="setting-up-a-project-in-rstudio"><span class="header-section-number">2.2</span> <strong>Setting up a project in RStudio</strong></h2>
<p>Projects are a really neat way to work in Rstudio – it means that all the inputs (i.e.&nbsp;data, scripts) and outputs (i.e.&nbsp;plots, summary tables) are stored in the same place. It also means other people can use the same project and rerun our analyses without having to define new filepaths (which can be a pain!) When starting a new project, it is a really good practice to set up a project and associated file structure.</p>
<p>Firstly go to <strong>file -&gt; new project</strong>, then select <strong>new directory</strong>, then <strong>new project</strong></p>
<p><img src="hs_images/fig_4_projects.PNG" class="img-fluid" style="width:70.0%"></p>
<p>Define your directory (folder) name (I’d suggest something like <strong>R_training_workshop_[date]</strong>)<br>
Then use the <strong>browse</strong> option to save this folder somewhere sensible for you (I tend to save things like this in a training folder on my box drive)</p>
<p><img src="hs_images/fig_5_projects2.PNG" class="img-fluid" style="width:70.0%"></p>
<p>Now you have a new project!</p>
<p>The next step is to open up a file explorer window and locate this folder</p>
<p>Manually create three new subfolders called <strong>data</strong>, <strong>scripts</strong> and <strong>plots</strong> – everything we use and create during this workshop will be stored here for easy reference and will be able to be reproduced by other or yourself on a different computer</p>
<p><img src="hs_images/fig_6_projects3.PNG" class="img-fluid" style="width:70.0%"></p>
</section>
<section id="exploring-r-finding-help-debugging-and-writing-comments" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="exploring-r-finding-help-debugging-and-writing-comments"><span class="header-section-number">2.3</span> <strong>Exploring R, finding help, debugging and writing comments</strong></h2>
<p>We can now start using R – the simplest thing to do is just to use R as a basic calculator. You can write equations in the script and run them in the console to do simple calculations</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">20</span> <span class="sc">*</span> <span class="fl">10.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 210</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">17</span> <span class="sc">+</span> <span class="dv">23</span> <span class="sc">-</span> <span class="dv">7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33</code></pre>
</div>
</div>
<p>There are also a wide range of mathematical functions such as log(), sqrt(), exp()</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
<p>If you don’t know what an inbuilt function does, type a ‘?’ before its name, and the help page will appear on the right hand side of your screen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>?sqrt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>A note on errors</strong> – these happen <em>ALL THE TIME!</em> A large part of learning to code is learning how to spot and fix your errors – this is called debugging (a great hobby for malaria researchers!)</p>
<p>For example, try the following - why do they not work?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(a)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="st">"a"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">SQRT</span>(<span class="dv">25</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">25</span>)<span class="er">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If your code isn’t working, the first few things to check are:</p>
<ul>
<li>Have you spelt the variable names and function names correctly?<br>
</li>
<li>Do the objects you’re working with exist?<br>
</li>
<li>Do you have the ‘&gt;’ appearing in the console window? If not something didn’t run properly so press <strong>Esc</strong> a few times until it reappears.</li>
</ul>
<p><strong>A note on commenting code</strong> - it is really good practice to comment your code - this means writing brief descriptions of what you’ve done.</p>
<p>By adding the ‘#’ before a line of code, it will not be run as code in your console</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># write in a description here so you can remember what you did in the future!</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># here I am using the formula for the area of a circle pi * r^2</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>area_of_cirlce <span class="ot">&lt;-</span> pi <span class="sc">*</span> <span class="dv">4</span> <span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can also comment out (i.e.&nbsp;add a # before them) lines of code that are maybe wrong or not needed in an analysis before you decide if you need to actually delete them or not.</p>
</section>
<section id="data-types" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="data-types"><span class="header-section-number">2.4</span> <strong>Data types</strong></h2>
<p>R can store and organize data, parameter, variables of lots of different types – we will now explore a few of them:</p>
<section id="numbers" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="numbers"><span class="header-section-number">2.4.1</span> <strong>Numbers</strong></h3>
<p>Single numbers can be given names like this</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>my_first_variable <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>my_first_variable</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20</code></pre>
</div>
</div>
<p>Important to think about how to name variables – do you want to be quick, or do you want your code to make sense to you and others in the future! We can use both uninformative and informative variable names</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">/</span><span class="dv">10</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>malaria_prevalence_2020 <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">/</span><span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The “&lt;-” operator tells R to take the number to the right of the symbol and store it in the variable named on the left (You could also use”=“)</p>
<p><strong>Note: R is case sensitive</strong> so for example, the variable ‘malaria_prevalence_2020’ is different than ‘Malaria_prevalence_2020’. Variable names cannot begin with numbers, and you cannot have ‘spaces’ in your variable names (we normally use an underscore ‘_’ where we might want a space).</p>
<p>You’ll probably create lots of variable names, and you might forget some of them. You can list all the ones in your session using</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "b"                       "has_annotations"        
[3] "malaria_prevalence_2020" "my_first_variable"      </code></pre>
</div>
</div>
<p>You can overwrite a variable at any point, for example,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>test_variable <span class="ot">&lt;-</span> <span class="dv">15</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>test_variable</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>test_variable <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>test_variable</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20</code></pre>
</div>
</div>
<p>In R programming, the terms ‘variable’ and ‘object’ are often used interchangeably.</p>
<p>Note: some variable names are not allowed - variables cannot begin with a number or punctuation. It is not a good idea to name variables after in-built R functions - i.e not a good idea to name a variable ‘sum’ or ‘mean’ - we will see very shortly that these words already have a purpose in R!</p>
</section>
<section id="strings" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="strings"><span class="header-section-number">2.4.2</span> <strong>Strings</strong></h3>
<p>Strings are like numbers (in that they represent only one object), but text instead:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>my_first_string  <span class="ot">&lt;-</span> <span class="st">"avocado"</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>my_first_string</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "avocado"</code></pre>
</div>
</div>
<p>Now, try this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>my_first_string  <span class="sc">*</span> my_first_string</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What happens? Why? If you’re not sure what type of data your object is, you can use this function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(my_first_string)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(my_first_variable)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<p>Here, “character” is the name of the datatype of strings, and “double” is a type of number. You can also use the functions “typeof” and “str” to find out about an object (try them out!).</p>
</section>
<section id="vectors" class="level3" data-number="2.4.3">
<h3 data-number="2.4.3" class="anchored" data-anchor-id="vectors"><span class="header-section-number">2.4.3</span> <strong>Vectors</strong></h3>
<p>Vectors and lists are the same kind of object, and represent a set of variables (numbers, strings) in an order. To do this, we use the function ‘c’ which is short for ‘combine’. It combines various objects into a vector. Create these vectors in R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.1</span>,<span class="fl">0.15</span>,<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.5</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"red"</span>,<span class="st">"blue"</span>,<span class="st">"green"</span>,<span class="st">"orange"</span>,<span class="st">"black"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can access an individual element by knowing its position in the list. So the 3rd element in the list v1 is found by using square brackets:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>v1[<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>Different types of brackets have different roles in R, so it’s important you use the correct type.</p>
<ul>
<li>Square brackets - <strong>[]</strong> - are used to access elements of vectors (and dataframes and other complex structures)</li>
<li>Round brackets - <strong>()</strong> - are used to contain the arguments of a function - i.e.&nbsp;in sqrt(25), the argument to the function ‘sqrt’ is ‘25’</li>
</ul>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{Question 1: What happens if you try to find an element that doesn’t exist?}}\)</span></p>
</blockquote>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{e.g. the 0th or 6th element of v1 - how do you type this and what is the output? }}\)</span></p>
</blockquote>
<p>You can calculate summary statistics of, and plot, a vector. What do each of these do?:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(v1)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(v1) </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(v1)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(v1)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(v1)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(v1)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(v1[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>)])</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(v1)</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(v1)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(v2,v1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{Question 2: What happens if you try to do use these operations on v3 rather than v1?}}\)</span></p>
</blockquote>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{Question 3: Try v1* v2 - What has the operator * done to your vectors? Is that what you expected?}}\)</span></p>
</blockquote>
<p>You can create a zero-vector of a given length (e.g.&nbsp;14) like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>v4 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">14</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This literally means - we want to repeat the value ‘0’ 14 times – you can learn more about the ‘rep’ function by typing ?rep</p>
<p>You can then add values into your vector, for example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>v4[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>v4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 10  0  0  0  0  0  0  0  0  0  0  0  0  0</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{Question 4:What do you think the following will do?  }}\)</span></p>
</blockquote>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{v4[2:14] &lt;- c(11:23) Try to guess before you try it!}}\)</span></p>
</blockquote>
<p>Note: the colon operator ‘:’ allows us to create vectors of consecutuve numbers. For example 1:5 creates a vector from 1 to 5. Quickly try creating a vector from 101 to 200.</p>
</section>
</section>
<section id="data-frames" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="data-frames"><span class="header-section-number">2.5</span> <strong>Data frames</strong></h2>
<p>Data frames are tables that are used for storing data, similar to what you might be used to seeing in excel. R has lots of built-in data sets that you can practice on, including one called CO2. Type</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>?CO2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>to read the documentation. You can load this dataset into R using:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"CO2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To see the data, you could type CO2 but it’s quite long. Instead you can look at the first few lines by typing</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">head</span>(CO2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Plant   Type  Treatment conc uptake
1   Qn1 Quebec nonchilled   95   16.0
2   Qn1 Quebec nonchilled  175   30.4
3   Qn1 Quebec nonchilled  250   34.8
4   Qn1 Quebec nonchilled  350   37.2
5   Qn1 Quebec nonchilled  500   35.3
6   Qn1 Quebec nonchilled  675   39.2</code></pre>
</div>
</div>
<p>Or if you want to look at more lines (i.e.&nbsp;the first 20)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(CO2, <span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Plant   Type  Treatment conc uptake
1    Qn1 Quebec nonchilled   95   16.0
2    Qn1 Quebec nonchilled  175   30.4
3    Qn1 Quebec nonchilled  250   34.8
4    Qn1 Quebec nonchilled  350   37.2
5    Qn1 Quebec nonchilled  500   35.3
6    Qn1 Quebec nonchilled  675   39.2
7    Qn1 Quebec nonchilled 1000   39.7
8    Qn2 Quebec nonchilled   95   13.6
9    Qn2 Quebec nonchilled  175   27.3
10   Qn2 Quebec nonchilled  250   37.1
11   Qn2 Quebec nonchilled  350   41.8
12   Qn2 Quebec nonchilled  500   40.6
13   Qn2 Quebec nonchilled  675   41.4
14   Qn2 Quebec nonchilled 1000   44.3
15   Qn3 Quebec nonchilled   95   16.2
16   Qn3 Quebec nonchilled  175   32.4
17   Qn3 Quebec nonchilled  250   40.3
18   Qn3 Quebec nonchilled  350   42.1
19   Qn3 Quebec nonchilled  500   42.9
20   Qn3 Quebec nonchilled  675   43.9</code></pre>
</div>
</div>
<p>We can see how big this dataset is using the following command</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(CO2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 84  5</code></pre>
</div>
</div>
<p>Where the first number is the number of rows and the second number is the number of columns.</p>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{Q5: What are the column names of this dataset?}}\)</span></p>
</blockquote>
<p>You can access individual element of a dataframe by knowing its row and column position. For example, “Quebec” is in third row and second column, so we can find it by typing:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>CO2[<span class="dv">3</span>,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Quebec
Levels: Quebec Mississippi</code></pre>
</div>
</div>
<p>So the first number refers to the row and the second number the column - we can remember this as CO2[row, column]</p>
<p>You can also extract an individual column or row. To extract the sixth row:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>CO2[<span class="dv">6</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Plant   Type  Treatment conc uptake
6   Qn1 Quebec nonchilled  675   39.2</code></pre>
</div>
</div>
<p>or third column:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>CO2[,<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] nonchilled nonchilled nonchilled nonchilled nonchilled nonchilled
 [7] nonchilled nonchilled nonchilled nonchilled nonchilled nonchilled
[13] nonchilled nonchilled nonchilled nonchilled nonchilled nonchilled
[19] nonchilled nonchilled nonchilled chilled    chilled    chilled   
[25] chilled    chilled    chilled    chilled    chilled    chilled   
[31] chilled    chilled    chilled    chilled    chilled    chilled   
[37] chilled    chilled    chilled    chilled    chilled    chilled   
[43] nonchilled nonchilled nonchilled nonchilled nonchilled nonchilled
[49] nonchilled nonchilled nonchilled nonchilled nonchilled nonchilled
[55] nonchilled nonchilled nonchilled nonchilled nonchilled nonchilled
[61] nonchilled nonchilled nonchilled chilled    chilled    chilled   
[67] chilled    chilled    chilled    chilled    chilled    chilled   
[73] chilled    chilled    chilled    chilled    chilled    chilled   
[79] chilled    chilled    chilled    chilled    chilled    chilled   
Levels: nonchilled chilled</code></pre>
</div>
</div>
<p>You can even subset the data, for example if you wanted to create a new dataframe, CO2_op2, which contains all rows but only the second and third columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>CO2_op2 <span class="ot">&lt;-</span> CO2[,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(CO2_op2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Type  Treatment
1 Quebec nonchilled
2 Quebec nonchilled
3 Quebec nonchilled
4 Quebec nonchilled
5 Quebec nonchilled
6 Quebec nonchilled</code></pre>
</div>
</div>
<p>You can also check what types of data are in each column using the command</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(CO2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Classes 'nfnGroupedData', 'nfGroupedData', 'groupedData' and 'data.frame':  84 obs. of  5 variables:
 $ Plant    : Ord.factor w/ 12 levels "Qn1"&lt;"Qn2"&lt;"Qn3"&lt;..: 1 1 1 1 1 1 1 2 2 2 ...
 $ Type     : Factor w/ 2 levels "Quebec","Mississippi": 1 1 1 1 1 1 1 1 1 1 ...
 $ Treatment: Factor w/ 2 levels "nonchilled","chilled": 1 1 1 1 1 1 1 1 1 1 ...
 $ conc     : num  95 175 250 350 500 675 1000 95 175 250 ...
 $ uptake   : num  16 30.4 34.8 37.2 35.3 39.2 39.7 13.6 27.3 37.1 ...
 - attr(*, "formula")=Class 'formula'  language uptake ~ conc | Plant
  .. ..- attr(*, ".Environment")=&lt;environment: R_EmptyEnv&gt; 
 - attr(*, "outer")=Class 'formula'  language ~Treatment * Type
  .. ..- attr(*, ".Environment")=&lt;environment: R_EmptyEnv&gt; 
 - attr(*, "labels")=List of 2
  ..$ x: chr "Ambient carbon dioxide concentration"
  ..$ y: chr "CO2 uptake rate"
 - attr(*, "units")=List of 2
  ..$ x: chr "(uL/L)"
  ..$ y: chr "(umol/m^2 s)"</code></pre>
</div>
</div>
<p>Three of the columns are called factors – these are often strings and correspond to a column on which you may want to analyse. They typically represent a variable that has a limited number of values – for example, sex, age group, or province would be considered factors in a malaria dataset.</p>
<p>We can see a quick summary of the numeric variables using</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(CO2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Plant             Type         Treatment       conc          uptake     
 Qn1    : 7   Quebec     :42   nonchilled:42   Min.   :  95   Min.   : 7.70  
 Qn2    : 7   Mississippi:42   chilled   :42   1st Qu.: 175   1st Qu.:17.90  
 Qn3    : 7                                    Median : 350   Median :28.30  
 Qc1    : 7                                    Mean   : 435   Mean   :27.21  
 Qc3    : 7                                    3rd Qu.: 675   3rd Qu.:37.12  
 Qc2    : 7                                    Max.   :1000   Max.   :45.50  
 (Other):42                                                                  </code></pre>
</div>
</div>
<p>If we want to explore on column of a dataframe, we use the ‘$’ operator – for example,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>CO2<span class="sc">$</span>Treatment</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] nonchilled nonchilled nonchilled nonchilled nonchilled nonchilled
 [7] nonchilled nonchilled nonchilled nonchilled nonchilled nonchilled
[13] nonchilled nonchilled nonchilled nonchilled nonchilled nonchilled
[19] nonchilled nonchilled nonchilled chilled    chilled    chilled   
[25] chilled    chilled    chilled    chilled    chilled    chilled   
[31] chilled    chilled    chilled    chilled    chilled    chilled   
[37] chilled    chilled    chilled    chilled    chilled    chilled   
[43] nonchilled nonchilled nonchilled nonchilled nonchilled nonchilled
[49] nonchilled nonchilled nonchilled nonchilled nonchilled nonchilled
[55] nonchilled nonchilled nonchilled nonchilled nonchilled nonchilled
[61] nonchilled nonchilled nonchilled chilled    chilled    chilled   
[67] chilled    chilled    chilled    chilled    chilled    chilled   
[73] chilled    chilled    chilled    chilled    chilled    chilled   
[79] chilled    chilled    chilled    chilled    chilled    chilled   
Levels: nonchilled chilled</code></pre>
</div>
</div>
<p>Returns just the ‘treatment’ column</p>
<p>Another useful function to quickly explore data is ‘table’ – what does this command return?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(CO2<span class="sc">$</span>Treatment) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
nonchilled    chilled 
        42         42 </code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{Q6a: What is the value in the 14th row and 5th column?}}\)</span></p>
</blockquote>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{Q6b: What are the values in the 1st to 7th rows of the 4th column}}\)</span></p>
</blockquote>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{Q6c: How many of the samples are from Quebec?}}\)</span></p>
</blockquote>
<p>We can also use functions to summarise the numeric data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(CO2<span class="sc">$</span>uptake)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 27.2131</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{Q7: What is the range and median of the uptake column? }}\)</span></p>
</blockquote>
<p>What if we only want to know the mean of the ‘uptake’ from Quebec?</p>
<p>This is where we’ll touch upon the fact that there are multiple ways to do almost <em>EVERYTHING</em> in R!</p>
<p>The traditional ‘base R’ approach uses the ‘which’ function to figure out which bits of the data we want to calculate our sum over –</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(CO2<span class="sc">$</span>Type <span class="sc">==</span> <span class="st">"Quebec"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This returns a vector with the positions in the column CO2$Type where the type is Quebec</p>
<p>This is then used inside square brackets to select only these elements of CO2$conc</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>CO2<span class="sc">$</span>conc[<span class="fu">which</span>(CO2<span class="sc">$</span>Type <span class="sc">==</span> <span class="st">"Quebec"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(CO2<span class="sc">$</span>uptake[<span class="fu">which</span>(CO2<span class="sc">$</span>Type <span class="sc">==</span> <span class="st">"Quebec"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33.54286</code></pre>
</div>
</div>
<p>The <strong>tidyverse</strong> approach, which we are covering in depth tomorrow uses a function called <em>filter</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>op1 <span class="ot">=</span> <span class="fu">filter</span>(CO2, Type <span class="sc">==</span> <span class="st">"Quebec"</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(op1<span class="sc">$</span>uptake)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33.54286</code></pre>
</div>
</div>
<p>We can also filter by 2 or more criteria</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>op2 <span class="ot">=</span> <span class="fu">filter</span>(CO2, Type <span class="sc">==</span> <span class="st">"Quebec"</span>, Treatment <span class="sc">==</span> <span class="st">"chilled"</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(op2<span class="sc">$</span>uptake)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 31.75238</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{Can you now fill in this table -  we want the **MEDIAN** uptake value for each treatment-type combination}}\)</span></p>
</blockquote>
<p><img src="hs_images/fig7_table.PNG" class="img-fluid" style="width:60.0%"></p>
</section>
<section id="packages" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="packages"><span class="header-section-number">2.6</span> <strong>Packages</strong></h2>
<p>R packages are collections of functions and data sets developed by the community.</p>
<p>They increase the power of R by improving existing base R functionalities, or by adding new ones. There seems to be an R package that does almost everything – from the most widely used ones</p>
<ul>
<li><strong>tidyverse</strong> - for data manipulation and analysis</li>
<li><strong>sf</strong> - everything spatial and map related</li>
<li><strong>ggplot2</strong> - for a wide range of plots</li>
<li><strong>janitor</strong> - cleaning data using standard conventions</li>
</ul>
<p>To the plain ridiculous:</p>
<ul>
<li><strong>wesanderson</strong> - A library of colour pallettes based on Wes Anderson movies</li>
<li><strong>cowsay</strong> - Printed animals that say messages</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(wes_palettes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "BottleRocket1"  "BottleRocket2"  "Rushmore1"      "Rushmore"      
 [5] "Royal1"         "Royal2"         "Zissou1"        "Darjeeling1"   
 [9] "Darjeeling2"    "Chevalier1"     "FantasticFox1"  "Moonrise1"     
[13] "Moonrise2"      "Moonrise3"      "Cavalcanti1"    "GrandBudapest1"
[17] "GrandBudapest2" "IsleofDogs1"    "IsleofDogs2"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">=</span> <span class="fu">wes_palette</span>(<span class="st">"GrandBudapest1"</span>)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>cols</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><embed src="base-r-intro_files/figure-html/s6_1-1.pdf" width="864" height="720"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">say</span>(<span class="st">"My favourite R package is called purrr"</span>, <span class="at">by =</span> <span class="st">"cat"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 -------------- 
My favourite R package is called purrr 
 --------------
    \
      \
        \
            |\___/|
          ==) ^Y^ (==
            \  ^  /
             )=*=(
            /     \
            |     |
           /| | | |\
           \| | |_|/\
      jgs  //_// ___/
               \_)
  </code></pre>
</div>
</div>
<section id="installing-and-using-a-package" class="level3" data-number="2.6.1">
<h3 data-number="2.6.1" class="anchored" data-anchor-id="installing-and-using-a-package"><span class="header-section-number">2.6.1</span> <strong>Installing and using a package</strong></h3>
<p>There are two stages to using a package</p>
<ol type="1">
<li><strong>Installing</strong> – think of this as <em>buying a book and adding it to your library</em> – this is an action you only ever need to do once.</li>
<li><strong>Loading</strong> – think of this as <em>taking the book from your library shelf</em> – you need to do this each time you want to use it.</li>
</ol>
<p>We’re going to try and install and use a package called <strong>janitor</strong> (https://cran.r-project.org/web/packages/janitor/vignettes/janitor.html)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(“janitor”)</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When installing a new package, I typically either write it straight in the console or comment it out in my script to avoid reinstalling every time I run my code</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(“janitor”)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you want to see all the functions available in a package, there are typically pdf’s online of each function and often user guides.<br>
You can also remind yourself of functions in a package by typing, for example,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>janitor<span class="sc">::</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In your console or script</p>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{Q8: Can you install and load either **wesanderson** or **cowsay** packages}}\)</span></p>
</blockquote>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{and generate either a Wes Anderson colour palette or a speaking animal?}}\)</span></p>
</blockquote>
</section>
</section>
<section id="reading-in-data" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="reading-in-data"><span class="header-section-number">2.7</span> <strong>Reading in data</strong></h2>
<p>Normally when we analyse data in R we are reading in external data sources - here we learn how to load those into R.</p>
<p>If this training has been shared with you, you should have access to a file called <strong>district-cases-wide.csv</strong> - now manually save this into the <strong>data</strong> folder in your project directory.</p>
<p>We can now read this into R</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/district-cases-wide.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is an aggregated dataset from DHIS2 in Zambia - we have a row for each district-month.<br>
We have 5 key bits of data (as well as date, province, district):</p>
<ul>
<li>clinical - number of unconfirmed malaria cases detected at the HF (from HMIS DHIS2)</li>
<li>confirmed - number of RDT confirmed malaria cases detected at the HF (from HMIS DHIS2)</li>
<li>tested - number of RDTs conducted at the HF (from HMIS DHIS2)</li>
<li>confirmed_passive_chw - number of RDT confirmed cases detected passively by CHWs (from NMEC DHIS2)</li>
<li>tested_passive_chw - number of RDTs conducted passively by CHWs (from NMEC DHIS2)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  period     province district   Clinical Confirmed Tested Confirmed_Passive_CHW
  &lt;date&gt;     &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;                 &lt;dbl&gt;
1 2018-01-01 Central  Chibombo         26      1897   8215                   NaN
2 2018-01-01 Central  Chisamba        NaN      2192   7772                   NaN
3 2018-01-01 Central  Chitambo         33      6011   3993                   NaN
4 2018-01-01 Central  Itezhi-te…      NaN       890   5007                   897
5 2018-01-01 Central  Kabwe            32      3600  13271                   NaN
6 2018-01-01 Central  Kapiri-Mp…      507     21527  18061                   NaN
# ℹ 1 more variable: Tested_Passive_CHW &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Note that (depending on your screen size) a few variables are not visible in the console. You can remedy this with the following code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">dplyr.width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can now apply some of the tools we’ve learnt today to analyse some aggregated DHIS2 data from Zambia.</p>
<section id="example-1-how-many-confirmed-malaria-cases-hf-there-were-in-katete-district-in-2020" class="level3" data-number="2.7.1">
<h3 data-number="2.7.1" class="anchored" data-anchor-id="example-1-how-many-confirmed-malaria-cases-hf-there-were-in-katete-district-in-2020"><span class="header-section-number">2.7.1</span> Example 1: How many <strong>confirmed malaria cases (HF)</strong> there were in <strong>Katete district</strong> in <strong>2020</strong>?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">year =</span> lubridate<span class="sc">::</span><span class="fu">year</span>(period))</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>op1 <span class="ot">=</span> <span class="fu">filter</span>(dat, district <span class="sc">==</span> <span class="st">"Katete"</span>, year <span class="sc">==</span> <span class="dv">2020</span>)</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>op1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 9
   period     province district Clinical Confirmed Tested Confirmed_Passive_CHW
   &lt;date&gt;     &lt;chr&gt;    &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;                 &lt;dbl&gt;
 1 2020-01-01 Eastern  Katete        NaN      2799   9777                  3586
 2 2020-02-01 Eastern  Katete        NaN      2331  10066                  3573
 3 2020-03-01 Eastern  Katete        NaN      5059  15256                 11604
 4 2020-04-01 Eastern  Katete        NaN      6855  14222                 21573
 5 2020-05-01 Eastern  Katete        NaN      7435  13215                 15851
 6 2020-06-01 Eastern  Katete        NaN      4910  10973                  7121
 7 2020-07-01 Eastern  Katete        NaN      2182   6686                  3246
 8 2020-08-01 Eastern  Katete        NaN      1074   5469                  1885
 9 2020-09-01 Eastern  Katete        NaN       751   4844                  1296
10 2020-10-01 Eastern  Katete        NaN       636   4971                  1179
11 2020-11-01 Eastern  Katete        NaN       416   5339                   961
12 2020-12-01 Eastern  Katete        NaN       422   3749                   753
# ℹ 2 more variables: Tested_Passive_CHW &lt;dbl&gt;, year &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(op1<span class="sc">$</span>confirmed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `confirmed`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
</section>
<section id="example-2-what-was-total-number-of-rdts-conducted-by-hfs-and-chws-in-sinazongwe-district-in-2019" class="level3" data-number="2.7.2">
<h3 data-number="2.7.2" class="anchored" data-anchor-id="example-2-what-was-total-number-of-rdts-conducted-by-hfs-and-chws-in-sinazongwe-district-in-2019"><span class="header-section-number">2.7.2</span> Example 2: What was <strong>total number of RDTs conducted by HFs and CHWs</strong> in <strong>Sinazongwe</strong> district in <strong>2019</strong>?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>op2 <span class="ot">=</span> <span class="fu">filter</span>(dat, district <span class="sc">==</span> <span class="st">"Sinazongwe"</span>, year <span class="sc">==</span> <span class="dv">2019</span>)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>op2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 9
   period     province district  Clinical Confirmed Tested Confirmed_Passive_CHW
   &lt;date&gt;     &lt;chr&gt;    &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;                 &lt;dbl&gt;
 1 2019-01-01 Southern Sinazong…      NaN      1663   6140                  1381
 2 2019-02-01 Southern Sinazong…       96      2167   7324                  1405
 3 2019-03-01 Southern Sinazong…       20      3618   8542                  3735
 4 2019-04-01 Southern Sinazong…        2      1134   4192                   894
 5 2019-05-01 Southern Sinazong…        6      2725   6332                  2585
 6 2019-06-01 Southern Sinazong…      187      1682   5116                  1049
 7 2019-07-01 Southern Sinazong…      NaN      1733   6137                  1027
 8 2019-08-01 Southern Sinazong…        1      1269   5528                   865
 9 2019-09-01 Southern Sinazong…      NaN      1022   4275                   713
10 2019-10-01 Southern Sinazong…      NaN       624   3180                   381
11 2019-11-01 Southern Sinazong…      NaN       212   1865                   100
12 2019-12-01 Southern Sinazong…      NaN       474   2244                   193
# ℹ 2 more variables: Tested_Passive_CHW &lt;dbl&gt;, year &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(op2<span class="sc">$</span>tested) <span class="sc">+</span> <span class="fu">sum</span>(op2<span class="sc">$</span>tested_passive_chw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `tested`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `tested_passive_chw`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{Question 9: What happens if we repeat this for Chama district?, Why?}}\)</span></p>
</blockquote>
<p>It’s really important to look at your data closely! We can fix this problem by using the following logic:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>test_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">3</span>,<span class="cn">NA</span>,<span class="dv">6</span>)</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(test_vector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(test_vector, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23</code></pre>
</div>
</div>
<p>How did we know to do this? We looked at the help file for <em>sum</em> by using <em>?sum</em> and saw the option to add an argument that removes NAs.</p>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{red}{\text{Question 9 cont.: Now we know how to remove NAs, how many RDTs were conducted in Chama in 2019?}}\)</span></p>
</blockquote>
<p>We will spend the next chapter learning about more ways to manipulate and aggregate data - but for now, you can try and answer these questions using the examples above!</p>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{teal}{\text{Final exercise 1: What is the total number of cases (all HF and CHW) in Western province in 2020? }}\)</span></p>
</blockquote>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{teal}{\text{Final exercise 2: How many RDTs have been conducted by CHWs in 2021 compared to 2020?}}\)</span></p>
</blockquote>
<blockquote class="blockquote">
<p><span class="math inline">\(\color{teal}{\text{Final exercise 3: In 2020, were there more malaria cases in Luapula or Muchinga?}}\)</span></p>
</blockquote>
</section>
</section>
<section id="cheat-sheet-of-functions-from-this-unit" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="cheat-sheet-of-functions-from-this-unit"><span class="header-section-number">2.8</span> <strong>Cheat sheet of functions from this unit</strong></h2>
<ul>
<li>sqrt()</li>
<li>exp()</li>
<li>log()</li>
<li>rep()</li>
<li>summary()</li>
<li>table()</li>
<li>dim()</li>
<li>mean()</li>
<li>median()</li>
<li>range()</li>
<li>sum()</li>
<li>str()</li>
<li>class()</li>
<li>head()</li>
<li>which()</li>
<li>read.csv()</li>
</ul>
<p>(And three functions from the tidyverse world)</p>
<ul>
<li>filter()</li>
<li>summarise()</li>
<li>pull()</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Background</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./if-statements.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Using <code>if</code> statements</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>